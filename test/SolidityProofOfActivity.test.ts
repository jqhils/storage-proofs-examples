import { expect } from "chai";
import hre, { ethers } from "hardhat";

describe("SolidityProofOfActivity", function () {
  let ProofOfActivity: any, StateProofVerifier: any, BlockHeaderVerifier: any, HistoricBlockAxiomVerifier: any;
  let proofOfActivity: any, stateProofVerifier: any, blockHeaderVerifier: any, historicBlockAxiomVerifier: any;
  const verifierAddress = "0x69963768F8407dE501029680dE46945F838Fc98B"; // Axiom Mainnet

  beforeEach(async function () {
    // Get contract factories
    StateProofVerifier = await ethers.getContractFactory("StateProofVerifier");
    BlockHeaderVerifier = await ethers.getContractFactory("BlockHeaderVerifier");
    HistoricBlockAxiomVerifier = await ethers.getContractFactory("HistoricBlockAxiomVerifier");
    ProofOfActivity = await ethers.getContractFactory("SolidityProofOfActivity");

    // Deploy contracts
    stateProofVerifier = await StateProofVerifier.deploy();
    await stateProofVerifier.waitForDeployment();

    blockHeaderVerifier = await BlockHeaderVerifier.deploy();
    await blockHeaderVerifier.waitForDeployment();

    historicBlockAxiomVerifier = await HistoricBlockAxiomVerifier.deploy(verifierAddress);
    await historicBlockAxiomVerifier.waitForDeployment();

    // Add these debug lines before deployment
    console.log("stateProofVerifier address:", stateProofVerifier.target);
    console.log("blockHeaderVerifier address:", blockHeaderVerifier.target);
    console.log("historicBlockAxiomVerifier address:", historicBlockAxiomVerifier.target);
    proofOfActivity = await ProofOfActivity.deploy(
      stateProofVerifier.target,
      blockHeaderVerifier.target,
      historicBlockAxiomVerifier.target
    );
    await proofOfActivity.waitForDeployment();
  });

  it("should verify EOA has activity between specified blocks", async function () {
    const eoa = "0x0e27b2411e4D45AADAF18E5bE2bDc6ebE438DfC3";
    const startBlock = 17000000;
    const endBlock = 17000100;

    // Block headers
    const startBlockHeader = "0xf90211a0e464691f28218637d00ac4d694a86c0e01044b0a76b357b997e575be6d4cc135a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794690b9a9e9aa1c9db991c7721a92d351db4fac990a072eea852168e4156811869d6e40789083891288161d5a110259cf4fc922b1a09a006ca3364e7ff05c6adad066d09dd50edc25e7935a7aa0bdb2f4ce07d2f5bf82ea0dafc7e17d609503a08b1406eb69c714cb3e7ba51e84580977c449999068ae513b9010000a5800311003514143110248118186108f900001a860055664930042204b7b9180823e91008c0b9131b71049561150a820741c69ac129022612639111ea2d3d64486012650ac92cef32730c52d000709735a2c81040099802121c448a70424a2342048632438001181c100001478f58a61c2006889926009a20035810b90034031189704c211210f15546029a8018c704609505b1a2034c0e3a824b4015b722cb4d01478131794a0ad270ab09108c102c49805860b10a0332111902920100834dd80582381a211238810814560a259d414c4b00240a70d0047e5d2a154ee4462230aa599280a9808624b042218981518f3400390b4c827819459d69e1501c008084010366408401c9c380838bc84a846430ae138f627920406275696c64657230783639a0508cf9f7faca2553230266065ff45109c2a25c2a55138f4176fd5228a7339b778800000000000000008504cad3abe1";
    const endBlockHeader = "0xf90213a093d91c7deaecb6445cb6e7da29331fedea0498fb86fc68343b79b18e6505aad6a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347941f9090aae28b8a3dceadf281b0f12828e676c326a0718c57ca063bdabc24d40b3a0a535e0273d55e6eacd81e7cb597f00436f4e6fba0c73c76d2e8093d748cb707bc2a70914a974c50a4746fd57f9c25ad33818070fba015a445c502c57adad75f3db37dd6af07c23b6a8531cb2ce222a98abb0d49bdb4b9010015245011034300811c4201f1e3031229002123124904c02d30c98cc487208708103001c25388823604981a406a24a7980601890088846b840042408700696b01884340104608183f6b1bc299418c55f426210050d0484c4805101c14aa400a00328a0020b23042210ac4194040068c4d0a3118d428900630b26082d1261a0804922003f004283110004dc8640200308344000c9181cd2e4947ea00c0023620228ba98541bb946802211243ee12101d81008c6c856083901309f41d60509820417908044290ba404a61e801241c0cac00c8acd28d80882212a24a2176282870ca10b9a68809e800a0470c108180a7380094ad045649e80053918df95382d310218084010366a48401c9c380836fdbef846430b2e7917273796e632d6275696c6465722e78797aa0e9ce22ec904112933a708585ab8e83e1462787bd3e9566dc8ec450b2d07617cf880000000000000000850580b68ceb";
    const startBlockHash = ethers.keccak256(startBlockHeader);
    const endBlockHash = ethers.keccak256(endBlockHeader);

    // Account proofs (same as Foundry test, truncated for brevity)
    const startAccountProof = [
      "0xf90211a0ac56e335724fb9576f47030b7f20271daf5af760471fab3ae53a17c2a96f27eda0d438f3ad8d96a3ad7e772738fe6518669e185352fddfd6b5f701c1bbbc4a4795a0b7502318f398fa0f9e138aa9f72b43f2a9d28bb1d422086d56c0e0a986de817fa07739d2fc7475e8fd330a7366ae160827b0e9ede670202aa02749323e91d4d22fa051811bb0263fac1357365af69ab11f523f80a028aab2c642cb793d3f78fd74e7a0bf4afc0e601fb4414472ad506eb12c744326412f03a72100676bb597f379f881a0ad0dd1675c4c7d15c5b7620a24502935b5e5627a2cc80a25579abf9ed7c1049da019c036d00e5ba00689c328391861f7f6251cbbd3d4ebb62ac5274406bd737cffa0f470a85d5192e60f03cdebffee9231cbe949e354e57e6eaeee0c7544d47edd81a00922c822cd85118b773a500a5dfdd9b8a38a604a9172b87c7b3471a65bbb8501a0d2fdf356ab6eca481a4027e1c576c24a75fcf1bfd12423eed0fd50a83f8e0d0aa016a3580e08047f0479c4be7b13bc7c5446f7e394d7a08ee413c352a2caf05fbea09bae005f7c383c1b26a142c19de08a9a38abf4264e1fbaf257423586dba918e8a06387d3eafc6b71bc47e5fe5a957637406636b41c1ddfbeb85352d5a11215cdffa0df6b96d4ec703253815f4d055358ce1ef7c820e00a58ba8694adad9f2db787daa0bc7b1ee96cfe4db5e0621777f634ec35d68cb2d3baff2911ae42fedb39274cab80",
      "0xf90211a05dcb3273d40c83e011e5af9ba4ceddd118003786b5829851667c230debdb9ad8a0bbca8f61faa7382756b3815de28ac67614190a5e7117bcf27f1a427cfd1df1b4a0565615ca76649124902377616b2ead3fa01222c9cfb1f74bd7871f829bc64b87a0cde40d5fda255020cd6f94506d0a7af467680c63ff907d80691b5d2c2f7e9cc4a02c44c359d82c1054183db7cfea8227a304721b8e627c6dfef72488ab191d98d4a0c7bcd4695a73657d96e9ae31e70de3379ba2fc70f7e0cea5ca4b4b1c14efe9c6a01a00c43d073a5cf0448c54530c22c1a7945eaf4f1d035e52f76c1f363edd8e4ea0d487581d1b9217a5395691074a5e6e6244a7d94f338b71ddc4e4eb7105ccda13a0cb2feb838eaffe2692eba184aeeaa2c4234b7b3d6316fd7039b4609009cbb250a0a193cce7d4dd63b217831e36c8cbb2d986a5c45aa782b9a75c0f66be32e5853fa00815a5e4b06edfa331c751cfc27158f6652086d6ec6f823083819234ab08e633a030bbf42e1f7abf448df87068e9f76da6cc8aca329632d42996389ff63e5558e6a0726715c00877423bc858043d4c948acd191cfaa73d2599c2871d23c70555afdba0ae39e5773aab235100f62549d658579205c6e295ccdb84c9f3878670e8fd21e5a05cf185ee45eb1c43ad33d420720e8089835065b6d7d06beae20559d4783b9beda0294f2297c71978ba2b00a9c3868cd31a9bd32f859ce25acd84ba74731acaedd580",
      "0xf90211a0cbaf287638104fc2ace2c939b406500c6285ff2e50c7eeeec18d062cef75e81ea0d9f2e3a21d6cfe5329f24e771b3bcc3e819a8a984b81c7290d097ecd6cec366ba010f186552e8c4025229f02335fca843b1e9eb07ab2eccc83c358968566061af9a0a7b970977fd261198b4a97ff1f37af12d08116e815732b4a4339cf4c4be37af6a0be26dd6f75702d6f94d24aa834a8d699fcba2375f9af0085b4dccaa0961e1f54a031a947bb916dd734be5c8d0ffab912dbb4907b205bd2eb27851957cc1fa4f204a0550646dff89c56082a59ab01f2f07241e46299aead0a146b93f5f677f43eb844a03a8a38a369d29ff74a359486f359dd01870e4522d4945bd945b82a31be1052c7a0aaf4bc10e00d0803ad69ace0a9a4540dfd462afef9c329327abe5da81225d8b6a0e60e7718f8f88c86fc4bb6bcb0b099993fd96fe9858909f8fd40046cdf8cb663a0a3dda19633106813636edb8f2be9cfd0dcef99a97d3449392d91322e91895bdea0825c0584214974eceb43b7d4c30f1c51fd9efd9873a908c4b14eb10d604a9592a0d20207af9afa931e867e2a04d642902f16376949b527e89d870cad2c17184cfba0b1db34d3191ac5f3e47d763800b9c75b507abd73701255dfee4fdc2954fca1c2a0f147808346e60c0a9fe8baf9b838571ba22fe91648671cbba6c008ce09689a58a0ddda6a75109d07c741e212db2a96253d1d47d90e05f8476fbb97aa00ce2be5ae80",
      "0xf90211a08e60e4364149a9f28bf358aba3aebf762b53d1b4f14bdd9abd0da55efbfe22dfa06aedd7c7fdbf9fa5a416260006628560ca8b8d16a1f715ad81236bd1391d7400a0cc8a7bc13f5dbf1d9d20f1a195876e6a16de70146f16cef4e2ff18ce1a4401d3a018352d6ed4dc054f3d8d832c1807b00e6d67885c99b0b90dbdb82db7ddc4069aa0a310000c1bd921b33accb7c119195161e6202b7d776d7616ca11a9a1f52eeddda0f50bdf0db6d14fa2628cfddc7632e60be7f06ac028c0727dd27e57ccbb13f5c8a0a936d4c6a1258423b30f91d74f17af42c5af3009724b34a24d7f9ed32ec4cdaaa03a133d8c8f16bf88e49a28673380cadfe9be2f4982246d2635bfa96d70ba4b01a0ad792cede8f8890387eda5d978df0835e055bcff5ab1c78aacdc986bf57e0907a04158196edc2a91123d2541d7fc398220819bd145a28f97bf961703167d4ce94fa0512d6e8ecde26a84d1585bd7cabd46d7f692790da4c351d00684c688ee0ebd83a0e7580c57270cdc508ef4979099dfd3d97de9670fcc700a1c69146d1cb2b380eba0fc70ee260519dcd279c0bfdf91f32bf5e10b996b00b57d38d8c4c2c4fdc406c6a0c9acc59a0b0961f5de318e06efd5bb9b0decda4b90741a982c712a09dfa2a468a0e8cf12ba58b3eafb8c66e7168d72b4727bd50407d58b9cff5578bc898f06d1c3a08dff3ac0c08085288a6bd3cd8391e9f1a0edd7eddf582c84c84c6166d70300a880",
      "0xf90211a0a7cd4a50094a3d7addb564bd1d6bc05054f8a5b57475d323f137be11b437b7faa016d7e8cb52f6e6ccccf302d6d6cc615ff08b0e5b206fd58105f6b7c57859875fa0c9ea008eac110661c1ceb13f42164d0e51715978f25b2117aaf3f61f52953eafa00a2b8197b176dbb54a7cc7a6efec0b7620cfa2baff42571eaab6c558fd33bb8ea06d2ec850a313aed68978c2fa2ddf10a21c3d637107a0b32ccbdbc08fbeaa37b6a006c8848cb5f56fca6e8581fb30dfdd99ae5ec2dc9bd5a7f7a4956e538c15fd0ea0a9afa43c7e568458f0de37d51da4ab5bea4cf9421df00e6c95be68e350f80967a0d8521c3d13fe161dba68a046807c33dab803c187c1976241bb5403794fed4a42a02b0f92e3374091b51009b56308800f62bb7d0ada324e8b7d257219748b80ac85a0654627af78d53e8c9253f6097c09ac6a45dd28d4ff30c452bd0612aa7286a8b1a0192f62fa97aa2d849274b2507b8c43dd22ded9eae99999908ccf2eb5bd7545a6a06b8ae83cd1da8aed9e935e1a21edc916724acbe56e841af5963a2945bcc33689a02c5dfd01dc487fcbe686e7c67883538fec0b443e479c3465df5712c0521dac17a05d8778c82d617757e2e55fef2d0198c7d82e18822257213a4f72ea084918bcc7a055b0e0d5d127574bbc54e533ee27810f8252a8704e6c91ed17a800619594189da0d1b7f43ab2dec1547eacc07172b0c5350e32faadb69280bcacc31326b30d1f2680",
      "0xf90211a0d83eab6803347a9a4b95db14cde3f59b756d901966f294a65ad196e0828d565da0ac8852090a2093ada38d8e2bef2501850f347f35dfafd1d7dd4c2e55da550295a0fcf8a6a05d8d2a66188572736559ad7d0d723c7f040cbc6f0c9dc0135feb9dd8a070f0976404e724a8f7abbcb4b541c3c61b7e2d206fa0ee63a722286763366db9a08334d346b5b7ad32c7186a6eb904ed0124b8d1609e0b10bb4e5468d46f4b6feda07f7409df779496b26d4c901c82799bca364efc97b2a113de849c36dff485c017a042fa06981e34c09d343f6001200760e29dcc9bd64dfb69c829421b20e3cc1564a06e46f5dc31728b49601150c1e3e548c9f000e13ee40ac119437af16929ded693a00b8266bc1efc8e96e34d733d9a5210a924cedbc1a665eac1375bd3a5adc82985a0d95708abf3e7a9de28e8bdddf16fb072e9c1d5cea7df36e901d41c4074fbd058a08450de780a9a22755d86d58de33547342603ff5844988712d5497e39d71d526ea0bef6645b1c684677da67afc318a5a0fbbb1553d4f6daf304808b6d7f9ad7bb87a01d8cd9825b2f74dda4d9b4d74efdc29b02d27d6d4dd0f0a250138fe71486b250a0d5aa41691cd3f66a1319ea3b345927735705c92444856c48b5ff9a3174a7c8f4a07ec512f26b947fb447f3f7d94acd38a84043fd7c60a73f475730186c78a0a80ca005418dd599981c442effd90aacb3cfe4649e527d73de8d17876fda3cf4c35e6980",
      "0xf90171a064a870a3593590ad1820fee9a494fa5ef161dd6c4919efed122a4b6fff981991a0d935a7244413061af583e50bec2ec12e4daf5f3ffac567f0cf4d7542ce46678da0b035c21560c18e382f6faca39967a8a2f2c6e1d8e9550f9972459280e2c7a21fa0cf6e226ac9d8282dbd2ca3a62fd03492c9e98821d655c3ee342438b38a10d94980a0dbff7a1ef9e1114ea132fbdd1acfca1707e3990bb384743a1b2ab1c5beaf522ca0170bf10ee8b8df9df57402086bc00b0b2be0fac4e64477e055ce9a0f86a00be5a056be89f3360ea245ed9d22392c5c8d421bf6f97e29e27748a630c2f8d70eaf55a02c6606c7cfb02ae7c1b31495dc289dbfa73d30d2c4121f377205264af4602f59a08b9757b705c614dd408ff6e66bafb227e86b5e93e2b42671d544b5b1db63efc680a08b2ea631ee482671b53a5643cee32d0b0abb7b12f66acac715f0fbc1ec7a73458080a066b78e9d8991f4e4d265ad9fb828171036d768df927a61c22f2081b9aaa4c4388080",
      "0xf8518080808080808080808080808080a0417ca0480af8862c2322116f960675c422292f28b04a2b343cda525b0e650766a0231502fc789544b2cd166450f53de4703a3fcd8bd5492a1582165b825786f31a80",
      "0xf86d9d20b0b061616a546f31377b72b3ec1f4c3b1531b261a44bf85ebfab2defb84df84b2487a155fbad2386aca056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a0c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"
    ];
    const endAccountProof = [
      "0xf90211a0b6dbdb82ea3f08262e1949a20f5644ff95442bf617e41d4f04732c76344897dba0eb4f854ed50afbff7e525dc17bd9487a411dabe0fed788e2562450fb2966a525a01de478eb1b4dd70da2136f9d037399b9c80ff542daf145e7684a9e24f245b31ba07415293de7de92e448d29b886e6d06d0115b108e6ac8638981c44be3c52947c4a04e2baa5a65bc72ede14e9b3a5ba5833f44e21dc18260304fdf22bb9a0ccc8f9ba0925e700956018b9f4b91752df88c1f3d208e798b056ee329ba035be1aac7b998a07d60adc775634e719fd8e2afbc5afaf22806c2414a253b93a3ce7b16227316e8a07912b4befc9befc923be02dc3d0e16713f8e903486fe2efc72d7f0d696366afba09c01c5645bc9d25895178af546bdf036b38a507c74d13805cc90544a28d88811a0ea83f0bffff223e456fab71dba1bacc9c4d24f17c2f06ca292c315fc6794b1baa0f90d760c242cd07a335a479764823ed10d4bede7f0e27957b25155694ea2b76ca0a29ed73f80b15f4e0dc4a28d5983c3a32c958924e288d7abc151d2570c6f73f5a01f5371bc242f54a1b9ab7b624de818af5315389c3c0681f6873813b854775892a0d14f4f2942be60148109ecc0ce663d2c6d29ea1b0da48125a55a237abd7e2de3a010c1ae61190fb349928307c92e124067a1a89b88daca6abd87cc4845ebde3ad2a0af9ec23f162428bf0db9a65ada22cb77871bd0b3799c0eb89883f569b4aadf6a80",
      "0xf90211a052b499c4d44d2c5a7b6dd50c94e847b1c9cdb92f3dd7dacb16bde6283cf932f1a01d5ef339f09114dbbf2fb2d704eccec1568bb50b9886e4a4675e9f468fe16fc3a0440321fd474a8f2e5a9fc4b202c463247936cc80023826eea9127954d9b14840a06c6fe88d19efd1299dd2f14a489282a12e27fa20fafba0ee60fe1091526dc7d4a0a8c2ad9b6300e79f53f556883f31c23aa8e5319d649f83e9553ecd3bd525afe8a0c2dd370e3402998d1180e29166f224d02441605a7682ee4b038eae60eccc15a3a0276cb207d76fb5fd019796a57a842fcc985f10c0b3555d7d1b8b4e2ecf84f4e3a0851f9b469bca3826d5df9f78025449962f7c4145c21575ac78989e9579771abfa0bd49ba798081613f56c41f1175bb4ef24e9ac8bdd0e662a6aa42aff5a3dc9dcea0ce7cc6e72d0a3abdde012e24525d66e5e68ea4c00acb1257c47c017e4c0f27d9a0ced004a4e41d103211eeeb80f070ce9b2075107183f969acb3dbf99b458c84f0a0f4f3b207002c3dba97d48b548d0673a2c76f0079fb33163e92f6125894bffd96a02311a46755c01bec6ccc56b6662f53d747142012eab7ece35eb45a1145e1c8b5a0058832270bfebee01d4b64b6d2d4a55a4b2e35a28a5d5e49a1327f0b967c6872a031715a86c8f7fa3c0f4a86b55fd13e6da5321d1ffb00cda977682cafb6010a1fa0d9757271613e47a536f7c88451ec3f413be321d290cd551e210cf9c5da7a2cea80",
      "0xf90211a07f79737903f4ac713ec2837f041bce1b07bd9380f0b9a490912c6d6cc2eda6dba028620ed1da3443449f6c931c4abed5c0048d204bd380da5d2fa0ae9074ad13e2a069b3263a69fbe5686925b03d95631694ba04c0a0f908591870722ca329c1416ba07eb0a65be9e9b98e0090b49a322ccafa766cf62073e6b3631e2ea8790dd24727a00bc56c378774b380ec42fa506a612037bf6b86c429aae837df4bd64800680f02a0413e053d74623f13ef56aa1c8ab7e52bd71788b1c686c33497d0ee51f420bb11a094e543a72c60e0acd326e4b0abfa4ec583b9600cc719a0b2884d552fb6c86d9ba0f3f9da04718f2e733b7981769f518aff930f78c4417570b7e3986ac5ad811c7ea0348a91479a9ee09f43b355d31241471f11c1a4da9b3186801021dba146b2d82ea095c5067106fcb8680683e63fc82a86cdc8558dc93902fac8b9c1f245f0e16f54a0bf46b316f6464cd49914cc8b73d52a2541c49a6f4ec5a2893c21380aa4c3e9bda01a1e2f157cf30afbc243bbda44a7b963f45c1e0f62a497a95ce238a3c34d7f01a071d6e8254ef237aea4f70acb70e4727563e4a80c1a4471e24286740d708b7bd6a0f62ea31d262e650b18efa34c74d7b0cb07192fd91a5881f1222404454557440aa09470498deb053a5540cbde2adaf1e68644fd400aa17db95e69a2c8483cddc182a0ec7c9e3aa8933705d2bee5b50e3fae596c40b09118eb28ca2119be8138b1194480",
      "0xf90211a0475f5eb288d346c8c6e4007c4b411cc553f6a9f14904ecf640fa1532b3c531c8a06aedd7c7fdbf9fa5a416260006628560ca8b8d16a1f715ad81236bd1391d7400a0cc8a7bc13f5dbf1d9d20f1a195876e6a16de70146f16cef4e2ff18ce1a4401d3a018352d6ed4dc054f3d8d832c1807b00e6d67885c99b0b90dbdb82db7ddc4069aa025e5360a2d68a17e4d80891661f0924c69ec0e0beb6b4f553141eb310950ec95a0f50bdf0db6d14fa2628cfddc7632e60be7f06ac028c0727dd27e57ccbb13f5c8a0a936d4c6a1258423b30f91d74f17af42c5af3009724b34a24d7f9ed32ec4cdaaa03a133d8c8f16bf88e49a28673380cadfe9be2f4982246d2635bfa96d70ba4b01a0dc611b8205b64a30483d1d42a6d3e16909a66a829bb38cfc4c3b7c9b8fe5daaaa04158196edc2a91123d2541d7fc398220819bd145a28f97bf961703167d4ce94fa01bb22576c26f63e1b4315d9e772ffc904e48724944f496aafe227dc2e6a690c2a0e7580c57270cdc508ef4979099dfd3d97de9670fcc700a1c69146d1cb2b380eba0fc70ee260519dcd279c0bfdf91f32bf5e10b996b00b57d38d8c4c2c4fdc406c6a0c9acc59a0b0961f5de318e06efd5bb9b0decda4b90741a982c712a09dfa2a468a0e8cf12ba58b3eafb8c66e7168d72b4727bd50407d58b9cff5578bc898f06d1c3a0b3a5cad3b3a674ce40e6a7eefd9d8bdeab8ae36aa00b0b481bbe2305131bc44380",
      "0xf90211a0a7cd4a50094a3d7addb564bd1d6bc05054f8a5b57475d323f137be11b437b7faa016d7e8cb52f6e6ccccf302d6d6cc615ff08b0e5b206fd58105f6b7c57859875fa0c9ea008eac110661c1ceb13f42164d0e51715978f25b2117aaf3f61f52953eafa00a2b8197b176dbb54a7cc7a6efec0b7620cfa2baff42571eaab6c558fd33bb8ea06d2ec850a313aed68978c2fa2ddf10a21c3d637107a0b32ccbdbc08fbeaa37b6a006c8848cb5f56fca6e8581fb30dfdd99ae5ec2dc9bd5a7f7a4956e538c15fd0ea0a9afa43c7e568458f0de37d51da4ab5bea4cf9421df00e6c95be68e350f80967a0d8521c3d13fe161dba68a046807c33dab803c187c1976241bb5403794fed4a42a02b0f92e3374091b51009b56308800f62bb7d0ada324e8b7d257219748b80ac85a0654627af78d53e8c9253f6097c09ac6a45dd28d4ff30c452bd0612aa7286a8b1a00b1e4c6844650e851a33fb2d23b8c3dcae4a6f2a708e88b5e7ab85fcdf2824d2a06b8ae83cd1da8aed9e935e1a21edc916724acbe56e841af5963a2945bcc33689a02c5dfd01dc487fcbe686e7c67883538fec0b443e479c3465df5712c0521dac17a05d8778c82d617757e2e55fef2d0198c7d82e18822257213a4f72ea084918bcc7a055b0e0d5d127574bbc54e533ee27810f8252a8704e6c91ed17a800619594189da0d1b7f43ab2dec1547eacc07172b0c5350e32faadb69280bcacc31326b30d1f2680",
      "0xf90211a0d83eab6803347a9a4b95db14cde3f59b756d901966f294a65ad196e0828d565da0ac8852090a2093ada38d8e2bef2501850f347f35dfafd1d7dd4c2e55da550295a051c14b2a0f0abb90de0b6b0c8ddc55a83f8421a9bf18523ae355a8080e4ca38aa070f0976404e724a8f7abbcb4b541c3c61b7e2d206fa0ee63a722286763366db9a08334d346b5b7ad32c7186a6eb904ed0124b8d1609e0b10bb4e5468d46f4b6feda07f7409df779496b26d4c901c82799bca364efc97b2a113de849c36dff485c017a042fa06981e34c09d343f6001200760e29dcc9bd64dfb69c829421b20e3cc1564a06e46f5dc31728b49601150c1e3e548c9f000e13ee40ac119437af16929ded693a00b8266bc1efc8e96e34d733d9a5210a924cedbc1a665eac1375bd3a5adc82985a0d95708abf3e7a9de28e8bdddf16fb072e9c1d5cea7df36e901d41c4074fbd058a08450de780a9a22755d86d58de33547342603ff5844988712d5497e39d71d526ea0bef6645b1c684677da67afc318a5a0fbbb1553d4f6daf304808b6d7f9ad7bb87a01d8cd9825b2f74dda4d9b4d74efdc29b02d27d6d4dd0f0a250138fe71486b250a0d5aa41691cd3f66a1319ea3b345927735705c92444856c48b5ff9a3174a7c8f4a07ec512f26b947fb447f3f7d94acd38a84043fd7c60a73f475730186c78a0a80ca005418dd599981c442effd90aacb3cfe4649e527d73de8d17876fda3cf4c35e6980",
      "0xf90171a064a870a3593590ad1820fee9a494fa5ef161dd6c4919efed122a4b6fff981991a0d935a7244413061af583e50bec2ec12e4daf5f3ffac567f0cf4d7542ce46678da0b035c21560c18e382f6faca39967a8a2f2c6e1d8e9550f9972459280e2c7a21fa0cf6e226ac9d8282dbd2ca3a62fd03492c9e98821d655c3ee342438b38a10d94980a0dbff7a1ef9e1114ea132fbdd1acfca1707e3990bb384743a1b2ab1c5beaf522ca0170bf10ee8b8df9df57402086bc00b0b2be0fac4e64477e055ce9a0f86a00be5a056be89f3360ea245ed9d22392c5c8d421bf6f97e29e27748a630c2f8d70eaf55a0c0a3386bf81bea9199a12040a3545cd05701feeae8118e76ed7d3278bab066f7a08b9757b705c614dd408ff6e66bafb227e86b5e93e2b42671d544b5b1db63efc680a08b2ea631ee482671b53a5643cee32d0b0abb7b12f66acac715f0fbc1ec7a73458080a066b78e9d8991f4e4d265ad9fb828171036d768df927a61c22f2081b9aaa4c4388080",
      "0xf8518080808080808080808080808080a093f1df57a548cfa43d8c9856de62ad8574003aef0da4f01b976ca6d5ecba6f3fa0231502fc789544b2cd166450f53de4703a3fcd8bd5492a1582165b825786f31a80",
      "0xf86d9d20b0b061616a546f31377b72b3ec1f4c3b1531b261a44bf85ebfab2defb84df84b2587995b509e6e8dcca056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a0c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"
    ];

    // Block hash witnesses
    const startBlockMerkleProof = [
      "0x81a28c76b0e3c86720e899e388f12c21d3c1d09762beba02e277b5b412cd8fef",
      "0x5775a0b6212028204bd14b543e27b07e11dc268ce1a48ca2a55a3f9e958c9ad7",
      "0x42543524c04ae1f87b37ad6787f12d7dcaad135f79ba00635452b32dbdc354e5",
      "0xfe1e32c1d45504f783fa5fe185f2e1fe55687cf9c5e00909695b3ad90bb9db6a",
      "0xf9991c5bcc24715da0396d482b04f05d0789d0671d4f41e439b7269ac654281c",
      "0xc346e80b474299ee6c1c8092e608b2f7e7acccd0042c9be146311773e2c53e41",
      "0xa26921d0c05e8ea0e711b6717cedde839894d4c57331d420e14942499bee4e8c",
      "0x8ef49de1651c3037689be73aa61dca8a4f48c483eefbffa506d8da182fb2ae29",
      "0x234d0828e8e26010b4516585a3b0fbb9c1380c4104cdef4ffa13bab63779799f",
      "0x9ecab60560f359fe7451d891a43f57ebc82f2e90c5bddbc7ecbd3c7ae51a28a6"
    ];
    const endBlockMerkleProof = [
      "0xc3228d70bf69bb036bc6713dbb3624bfdf59d77493503fb08d4c254a0a32853b",
      "0x875732bda40f210d8b9b96b2b0aff5b77ebf43181fdcbfa9cec1eb4332ad31f3",
      "0x9023970261b9afc4034becdcdf1a841bc3b08e8d7cd7867ee6c99a05cc2dc112",
      "0xb78c2ae2bb7570a94cf8f7bd6a2a96eb3eb9960412979e36608ee4dafa925cec",
      "0xbd904a09583e58c1dbd6738fbad10a68fdc7d93328c92ab338d3f7d0d106a5b0",
      "0x882cc8e149da5d86a910af6c80a3a6bb5232509fe96ed823cc3adac96778687a",
      "0x5cdd185dbe214b085291cd3f7722122ef2fae55c271cba8f112f31b3e4e7c55a",
      "0x4e731ae46b08da199c6877457da670f15008ece314b2e2422609786324e29a07",
      "0x234d0828e8e26010b4516585a3b0fbb9c1380c4104cdef4ffa13bab63779799f",
      "0x9ecab60560f359fe7451d891a43f57ebc82f2e90c5bddbc7ecbd3c7ae51a28a6"
    ];

    const startBlockWitness = {
      blockNumber: startBlock,
      claimedBlockHash: startBlockHash,
      prevHash: "0xf8f75859f45260b55b59dcb734b79dee2032cfdde7e2a6f9234fa49e65c9d291",
      numFinal: 1024,
      merkleProof: startBlockMerkleProof,
    };

    const endBlockWitness = {
      blockNumber: endBlock,
      claimedBlockHash: endBlockHash,
      prevHash: "0xf8f75859f45260b55b59dcb734b79dee2032cfdde7e2a6f9234fa49e65c9d291",
      numFinal: 1024,
      merkleProof: endBlockMerkleProof,
    };

    // Call hasActivity
    const isValid = await proofOfActivity.hasActivity(
      eoa,
      startBlock,
      endBlock,
      startBlockHeader,
      endBlockHeader,
      startBlockHash,
      endBlockHash,
      startAccountProof,
      endAccountProof,
      startBlockWitness,
      endBlockWitness
    );

    // const result = await proofOfActivity.isVerified();
    expect(isValid).to.be.true;


    // Perform test_hasActivity to measure gas
    await proofOfActivity.test_hasActivity(
      eoa,
      startBlock,
      endBlock,
      startBlockHeader,
      endBlockHeader,
      startBlockHash,
      endBlockHash,
      startAccountProof,
      endAccountProof,
      startBlockWitness,
      endBlockWitness
    );
  });
});